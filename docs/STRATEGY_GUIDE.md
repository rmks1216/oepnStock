# 백테스팅 전략 가이드

백테스팅 전략 프로파일 관리를 위한 종합 가이드입니다. 이 문서는 `config/backtest_profiles.yaml`과 유기적으로 연동되어 전략 수립과 검증을 지원합니다.

## 📋 목차

- [전략 프로파일 개요](#전략-프로파일-개요)
- [전략별 상세 분석](#전략별-상세-분석)
- [파라미터 설정 가이드](#파라미터-설정-가이드)
- [전략 비교 및 선택](#전략-비교-및-선택)
- [성과 평가 기준](#성과-평가-기준)
- [전략 최적화 방법](#전략-최적화-방법)

---

## 전략 프로파일 개요

현재 시스템에서 제공하는 5가지 핵심 전략 프로파일:

| 프로파일 | 전략명 | 투자 성향 | 홀딩 기간 | 리스크 수준 |
|---------|--------|----------|----------|------------|
| `default` | 기본 단기매매 전략 | 균형 | 5일 | 중간 |
| `aggressive` | 적극적 단기매매 전략 | 공격적 | 3일 | 높음 |
| `conservative` | 보수적 단기매매 전략 | 보수적 | 7일 | 낮음 |
| `scalping` | 스켈핑 전략 | 매우 공격적 | 1일 | 매우 높음 |
| `swing` | 스윙 트레이딩 전략 | 안정적 | 10일 | 낮음 |

---

## 전략별 상세 분석

### 🎯 기본 전략 (default)

**📊 핵심 특성**
- **목표**: 안정적 단기 수익 추구
- **시장 적응력**: 중간
- **복잡도**: 낮음

**📈 주요 파라미터**
```yaml
# config/backtest_profiles.yaml > default
signal_ma_short: 5      # 단기 이평선
signal_ma_long: 20      # 장기 이평선  
signal_rsi_period: 14   # RSI 기간
rebalance_frequency: 5  # 리밸런싱 주기
max_positions: 5        # 최대 보유 종목
```

**🎪 적용 시나리오**
- 초보 투자자의 첫 백테스팅
- 안정적인 기본 성과 확보
- 다른 전략과의 기준점(벤치마크) 역할

**⚖️ 장단점**
- ✅ 장점: 안정성, 이해하기 쉬움, 범용성
- ❌ 단점: 수익률 제한적, 변동성 대응 부족

---

### ⚡ 적극적 전략 (aggressive)

**📊 핵심 특성**
- **목표**: 높은 수익률 추구
- **시장 적응력**: 높음
- **복잡도**: 중간

**📈 주요 파라미터**
```yaml
# config/backtest_profiles.yaml > aggressive
signal_ma_short: 3      # 민감한 단기 신호
signal_ma_long: 15      # 중간 장기 신호
rebalance_frequency: 3  # 빈번한 리밸런싱
max_positions: 7        # 분산 투자 확대
ma_trend_factor: 0.98   # 낮은 진입 임계값
```

**🎪 적용 시나리오**
- 강세장에서의 적극적 투자
- 단기 변동성을 활용한 수익 추구
- 리스크 허용도가 높은 투자자

**⚖️ 장단점**
- ✅ 장점: 높은 수익 잠재력, 빠른 시장 대응
- ❌ 단점: 높은 변동성, 거래 비용 증가

---

### 🛡️ 보수적 전략 (conservative)

**📊 핵심 특성**
- **목표**: 안전한 자본 보존 + 꾸준한 수익
- **시장 적응력**: 중간
- **복잡도**: 낮음

**📈 주요 파라미터**
```yaml
# config/backtest_profiles.yaml > conservative
signal_ma_short: 10     # 안정적 단기 신호
signal_ma_long: 30      # 긴 장기 추세
signal_rsi_overbought: 65  # 보수적 과매수 기준
max_positions: 3        # 집중 투자
ma_trend_factor: 1.02   # 높은 진입 임계값
```

**🎪 적용 시나리오**
- 약세장이나 불확실한 시장 환경
- 자본 보존이 최우선인 투자자
- 은퇴 자금 등 중요 자산 운용

**⚖️ 장단점**
- ✅ 장점: 낮은 리스크, 안정적 성과, 드로다운 최소화
- ❌ 단점: 제한적 수익률, 기회 손실 가능

---

### 🏃 스켈핑 전략 (scalping)

**📊 핵심 특성**
- **목표**: 초단기 가격 차익 포착
- **시장 적응력**: 매우 높음
- **복잡도**: 높음

**📈 주요 파라미터**
```yaml
# config/backtest_profiles.yaml > scalping
signal_ma_short: 2      # 매우 민감한 신호
signal_ma_long: 8       # 짧은 추세 확인
rebalance_frequency: 1  # 매일 리밸런싱
max_positions: 10       # 고도 분산
signal_rsi_period: 7    # 빠른 모멘텀 감지
```

**🎪 적용 시나리오**
- 고빈도 거래 환경
- 충분한 거래 자본과 낮은 수수료
- 실시간 모니터링 가능한 환경

**⚖️ 장단점**
- ✅ 장점: 높은 거래 기회, 시장 중립적
- ❌ 단점: 높은 거래 비용, 스트레스, 기술적 복잡성

---

### 🌊 스윙 전략 (swing)

**📊 핵심 특성**
- **목표**: 중기 추세를 활용한 안정적 수익
- **시장 적응력**: 중간
- **복잡도**: 낮음

**📈 주요 파라미터**
```yaml
# config/backtest_profiles.yaml > swing
signal_ma_short: 20     # 중기 추세 신호
signal_ma_long: 60      # 장기 추세 확인
rebalance_frequency: 10 # 주간 리밸런싱
signal_rsi_overbought: 60  # 보수적 진입
max_single_position_ratio: 0.3  # 집중 투자
```

**🎪 적용 시나리오**
- 명확한 추세가 있는 시장
- 충분한 자본과 긴 투자 시계
- 낮은 관리 부담을 원하는 투자자

**⚖️ 장단점**
- ✅ 장점: 낮은 거래 비용, 관리 편의성, 추세 활용
- ❌ 단점: 횡보장에서 부진, 긴 보유 기간

---

## 파라미터 설정 가이드

### 📊 기술적 지표 파라미터

#### 이동평균선 설정
| 파라미터 | 역할 | 설정 가이드 | 예시 값 |
|---------|------|------------|---------|
| `signal_ma_short` | 단기 추세 감지 | 2-20일 (짧을수록 민감) | 5일 |
| `signal_ma_long` | 장기 추세 확인 | 15-60일 (길수록 안정) | 20일 |
| `ma_trend_factor` | 추세 강도 조건 | 0.95-1.05 (낮을수록 쉬운 진입) | 1.0 |

#### RSI 설정
| 파라미터 | 역할 | 설정 가이드 | 예시 값 |
|---------|------|------------|---------|
| `signal_rsi_period` | RSI 계산 기간 | 7-30일 (짧을수록 민감) | 14일 |
| `signal_rsi_overbought` | 과매수 기준선 | 60-80 (낮을수록 보수적) | 70 |

### 🎯 포지션 관리 파라미터

#### 리밸런싱 설정
| 파라미터 | 역할 | 설정 가이드 | 권장 값 |
|---------|------|------------|---------|
| `rebalance_frequency` | 포트폴리오 재조정 주기 | 1-10일 | 5일 |
| `max_positions` | 최대 보유 종목 수 | 3-10개 | 5개 |
| `max_single_position_ratio` | 개별 종목 최대 비중 | 0.1-0.3 | 0.2 |

#### 리스크 관리 설정
| 파라미터 | 역할 | 설정 가이드 | 권장 값 |
|---------|------|------------|---------|
| `market_score_threshold` | 시장 진입 조건 | 60-80점 | 70점 |
| `sell_threshold_ratio` | 매도 신호 민감도 | 0.90-0.98 | 0.95 |

---

## 전략 비교 및 선택

### 🎪 시장 상황별 적합한 전략

#### 강세장 (Bull Market)
1. **1순위**: `aggressive` - 상승 모멘텀 최대 활용
2. **2순위**: `scalping` - 고빈도 거래로 수익 극대화
3. **3순위**: `default` - 안정적 상승세 추종

#### 약세장 (Bear Market)  
1. **1순위**: `conservative` - 자본 보존 최우선
2. **2순위**: `swing` - 반등 구간 포착
3. **3순위**: `default` - 기본적 리스크 관리

#### 횡보장 (Sideways Market)
1. **1순위**: `scalping` - 작은 변동성 활용
2. **2순위**: `conservative` - 안전한 구간 매매
3. **3순위**: `aggressive` - 돌파 시점 포착

### 💰 투자자 성향별 전략 선택

#### 공격적 투자자
- **주력 전략**: `aggressive` + `scalping`
- **특징**: 높은 수익률 추구, 리스크 감수 가능
- **모니터링**: 실시간 감시 필요

#### 균형 투자자  
- **주력 전략**: `default` + `swing`
- **특징**: 수익성과 안정성의 균형
- **모니터링**: 주간 단위 점검

#### 보수적 투자자
- **주력 전략**: `conservative` + `swing`  
- **특징**: 자본 보존 우선, 꾸준한 수익
- **모니터링**: 월간 단위 점검

---

## 성과 평가 기준

### 📈 핵심 성과 지표 (KPIs)

#### 수익성 지표
- **총 수익률** (Total Return): 절대적 성과
- **연환산 수익률** (Annualized Return): 기간 보정 성과  
- **벤치마크 대비 초과수익**: 상대적 성과

#### 리스크 지표
- **최대 낙폭** (Maximum Drawdown): 최대 손실 폭
- **변동성** (Volatility): 수익률 표준편차
- **샤프 비율** (Sharpe Ratio): 위험 조정 수익률

#### 거래 효율성
- **승률** (Win Rate): 수익 거래 비율
- **평균 거래당 수익**: 거래 효율성
- **거래 비용 비율**: 비용 대비 효율성

### 🎯 전략별 목표 수치

| 전략 | 목표 수익률 | 최대 낙폭 | 샤프 비율 | 승률 |
|-----|-----------|---------|----------|------|
| `default` | 10-15% | <15% | >0.8 | >50% |
| `aggressive` | 15-25% | <25% | >0.6 | >45% |
| `conservative` | 5-10% | <10% | >1.0 | >55% |
| `scalping` | 20-30% | <20% | >0.5 | >40% |
| `swing` | 8-12% | <12% | >0.9 | >52% |

---

## 전략 최적화 방법

### 🔧 파라미터 튜닝 접근법

#### 1단계: 기준선 설정
```bash
# 기본 전략으로 벤치마크 생성
python examples/backtesting_example.py
```

#### 2단계: 다중 프로파일 비교
```bash
# 모든 전략 동시 테스트
python examples/backtest_with_profiles.py
```

#### 3단계: 세부 조정
1. **최적 성과 전략 선택**
2. **파라미터 범위 설정** (±20% 범위)
3. **그리드 서치** 또는 **베이지안 최적화**
4. **워크포워드 테스트**

### 📊 최적화 우선순위

#### 높은 영향도 파라미터
1. `signal_ma_short` / `signal_ma_long` - 신호 생성의 핵심
2. `rebalance_frequency` - 거래 빈도 결정  
3. `market_score_threshold` - 진입 조건

#### 중간 영향도 파라미터
1. `signal_rsi_period` / `signal_rsi_overbought`
2. `max_positions` / `max_single_position_ratio`
3. `ma_trend_factor` / `sell_threshold_ratio`

#### 낮은 영향도 파라미터
1. `min_recent_up_days`
2. `initial_capital` (백테스트 목적)

### 🎪 최적화 시 주의사항

#### 과최적화 방지
- **훈련 기간**: 최소 1년 이상
- **검증 기간**: 훈련 기간의 30% 이상
- **아웃오브샘플 테스트**: 반드시 실시

#### 시장 환경 고려
- **다양한 시장 상황** 포함 (강세/약세/횡보)
- **경제 사이클** 고려 (경기 확장/침체)
- **변동성 환경** 변화 (고변동/저변동)

#### 실무 제약 반영
- **거래 비용** 현실적 적용
- **슬리피지** 보수적 가정
- **유동성 제약** 고려

---

## 📝 전략 문서 업데이트 가이드

### 자동 동기화 원칙
1. **YAML 변경** → **문서 업데이트** 자동 트리거
2. **백테스트 결과** → **성과 섹션** 자동 업데이트  
3. **새로운 전략** → **문서 템플릿** 자동 생성

### 수동 업데이트 항목
- 시장 상황 분석 및 전망
- 전략별 세부 해석 및 개선 방향
- 최적화 결과 및 권장사항

---

*이 문서는 `config/backtest_profiles.yaml`과 연동되어 관리됩니다.*  
*마지막 업데이트: 2025-08-09*